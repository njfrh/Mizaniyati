<?php
session_start();
$user_id = $_SESSION['user_id'] ?? 'guest';
?>
<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<title>๐ค ูุณุงุนุฏ ููุฒุงููุชู</title>
<style>
 body {
  margin: 0;
  background: linear-gradient(135deg, #2AB7A9, #1E8E82 65%);
  display: flex;
  justify-content: center;
  align-items: center;
  min-height: 100vh;
  padding: 20px;
  font-family: "Cairo", system-ui, -apple-system, Segoe UI, Roboto, Arial;
}

#back-btn {
  position: fixed;
  top: 20px;
  right: 20px;
  background: #116B63;
  color: #fff;
  border: none;
  border-radius: 12px;
  padding: 10px 16px;
  font-size: 14px;
  cursor: pointer;
  box-shadow: 0 4px 12px rgba(0,0,0,0.18);
  z-index: 1000;
  transition: 0.25s;
}
#back-btn:hover {
  background: #2AB7A9;
}

.container {
  background: #fff;
  width: 500px;
  max-width: 95%;
  height: 700px;
  border-radius: 22px;
  box-shadow: 0 12px 35px rgba(0,0,0,0.15);
  display: flex;
  flex-direction: column;
  overflow: hidden;
  position: relative;
  animation: fadeIn .5s ease;
}

.topbar {
  background: #116B63;
  color: #fff;
  font-size: 20px;
  font-weight: 800;
  padding: 16px;
  text-align: center;
}

#chat {
  flex: 1;
  background: #f0fdfb;
  padding: 15px;
  overflow-y: auto;
  display: flex;
  flex-direction: column;
  gap: 10px;
}

.msg {
  padding: 12px 16px;
  border-radius: 16px;
  max-width: 70%;
  word-wrap: break-word;
  font-size: 14px;
  line-height: 1.4;
}

.user {
  background: #2AB7A9;
  color: #fff;
  align-self: flex-end;
  border-bottom-right-radius: 0;
  box-shadow: 0 3px 8px rgba(0,0,0,0.12);
}

.ai {
  background: #e6ffef;
  color: #0c7b35;
  align-self: flex-start;
  border-bottom-left-radius: 0;
  box-shadow: 0 3px 8px rgba(0,0,0,0.12);
}

.input-box {
  display: flex;
  gap: 10px;
  padding: 14px;
  border-top: 1px solid #c8e9e6;
  background: #fff;
}

input {
  flex: 1;
  padding: 12px;
  border-radius: 12px;
  border: 1.7px solid #c8e9e6;
  font-size: 15px;
  outline: none;
  transition: 0.25s;
}

input:focus {
  border-color: #2AB7A9;
  box-shadow: 0 0 0 3px rgba(42,183,169,0.20);
}

button {
  padding: 12px 18px;
  border: none;
  border-radius: 12px;
  background: #2AB7A9;
  color: #fff;
  font-weight: 800;
  cursor: pointer;
  font-size: 15px;
  transition: 0.25s;
}

button:hover {
  background: #1E8E82;
}

@keyframes fadeIn {
  from { opacity: 0; transform: translateY(15px); }
  to   { opacity: 1; transform: translateY(0); }
}
</style>
</head>
<body>

<button id="back-btn" onclick="goBack()">ุงูุฑุฌูุน ููุฑุตูุฏ</button>

<div class="container">
  <div class="topbar">๐ค ูุณุงุนุฏ ููุฒุงููุชู</div>
  <div id="chat"></div>

  <div class="input-box">
    <input type="text" id="msg" placeholder="ุงูุชุจ ุณุคุงูู ููุง...">
    <button type="button" onclick="send()">ุฅุฑุณุงู</button>
  </div>
</div>

<script>
function goBack() {
  window.history.back();
}

// ูุนุฑู ุงููุณุชุฎุฏู ูู ุงูุณูุดู (ููู ูุณุชุฎุฏู ุดุงุช ุฎุงุต)
const USER_ID = "<?= htmlspecialchars($user_id, ENT_QUOTES, 'UTF-8') ?>";
const CHAT_KEY = "chatData_" + USER_ID;
const CHAT_EXPIRE_KEY = "chatExpire_" + USER_ID;

/*ุงูุฑุฏูุฏ ุงููุบููุฉ ุงูุฐููุฉ */
const rules = [
 {
    keywords: ["ูููู","ูุงู","ููุง", "ูุฑุญุจุง", "ุงูุณูุงู"],
    replies: [
      "ููุง ูุงููู! ููู ุฃูุฏุฑ ุฃุณุงุนุฏู ุงููููุ",
      "ูุงููุง ููู! ุชูุถู ุงุณุฃู ุงููู ุชุจููู.",
      "ูุฑุญุจุชูู! ุฃูุง ุจุงูุฎุฏูุฉ ๐ค"
    ]
  },

  {
    keywords: ["ุงูุช","ุงูุด ุงุณูู","ุงุณูู", "ููู ุงูุช"],
    replies: [
      "ุฃูุง ูุณุงุนุฏ ููุฒุงููุชูุ ุฌุงูุฒ ุฃุณุงุนุฏู ุจุฃู ุดูุก.",
      "ุงุณูู ูุณุงุนุฏ ููุฒุงููุชูุ ููุณุนุฏูู ุฃูุฏู ูู ุฎุฏูุฉ ููุชุงุฒุฉ.",
      "ุชูุฏุฑ ุชูุงุฏููู ูุณุงุนุฏ ููุฒุงููุชู ๐ค"
    ]
  },

  {
    keywords: [ "ุทูุจ ููู ุงุชุญูู ูู ูุตุงุฑููู","ูุด ุงูุชุทุจูู ุฐุง","ููู ุงุณุชุฎุฏู ุงูุชุทุจูู", "ุทุฑููุฉ ุงูุงุณุชุฎุฏุงู","ุงูุด ุงุณูู ", "ูุด ุงุณูู"],
    replies: [
      "ุงุณุชุฎุฏุงู ุงูุชุทุจูู ุจุณูุท! ุฃุถููู ูุตุงุฑููู ูุชุงุจุนู ููุฒุงููุชู.",
      "ูู ุงููู ุนููู ุชุถูููู ุงููุตุงุฑูู ูุชุญุฏุฏูู ููุฒุงููุชูุ ูุงูุจุงูู ุนููู.",
      "ุงุณุชุฎุฏูู ุงูุชุทุจูู ูุฅุฏุงุฑุฉ ูุตุงุฑููู ุจุดูู ูููู ุจุณูููุฉ."
    ]
  },

  {
    keywords: [" ูุฏุฑู ููู" ,"ุทูุจ ููููู" ,"ูููู ุงูุทุฑููู","ููู ุนุงุฑูู","ุดุณูู", "ูุงุงุฏุฑู ููู"],
    replies: [
      "ุงุจุฏุฆู ุจุฎุทูุฉ ุตุบูุฑุฉโฆ ุณุฌููู ุตุฑู ูุงุญุฏ ุจุณ ุงููููุ ูุงูุจุงูู ุจูุตูุฑ ุฃุณูู.",
      "ููุง ูุดููู ุงูููุ ูููู ูู ูุด ุชุจูู ุชุณููู ูุฃูุง ูุนุงู. ",
      "ุฃุจุณูุทูุง ูู: ุญุฏุฏู ูุฏูู , ุชุจูู ุชููุฑููุ ุชุชุญูููู ุจุงููุตุงุฑููุ ุงุจู ุฃุนุฑู ุนุดุงู ุงูุฌูู." 
    ]
  },

  {
    keywords: ["ูุณูุช ูููุฉ ุงููุฑูุฑ"],
    replies: [
      "ูุงุชููููู ุงุจุฏุงุ ุงุถุบุทู (ูุณูุช ูููุฉ ุงููุฑูุฑ) ูู ุจุฏุงูู ุนูุฏ ุชุณุฌูู ุงูุฏุฎูู ูุจุชูุฏุฑูู ุชุนูุฏูู ุงูุชุนููู.",
      "ุงูุญู ุจุณูุทโฆ ุงุณุชุฎุฏูู ุฎูุงุฑ ูุณูุช ูููุฉ ุงููุฑูุฑ.",
      "ุฌุฑุจู ุฒุฑ (ูุณูุช ูููุฉ ุงููุฑูุฑ)ุ ูุฑุงุญ ุชูุญู ุงููุดููุฉ."
    ]
  },

  {
    keywords: ["ุงูุฑุตูุฏ", "ุฑุตูุฏู", "ูุชุญุฏุซ"],
    replies: [
      "ุงูุฑุตูุฏ ูุญุฏุซ ุชููุงุฆู ุจุนุฏ ุงูุฅุถุงูุฉ ูุงูุฎุตู. ูู ูุง ุชุบูุฑุ ุบุงูุจูุง ุงููุจูุบ ูุงู ุตูุฑ.",
      "ุงููุธุงู ูุญุฏุซ ุงูุฑุตูุฏ ูุจุงุดุฑุฉุ ุชุฃูุฏู ูู ูููุฉ ุงููุจูุบ.",
    ]
  },

  {
    keywords: ["ูุตูุญู", "ุนุทูู ูุตูุญู", "ุณุงุนุฏูู", "ุงุฏุงุฑุฉ ุงูููุฒุงููุฉ", "ูููุณู"],
    replies: [
        "ุฃูู ุฎุทูุฉ: ุณุฌูู ูู ูุตุฑููุ ุญุชู ูู 5 ุฑูุงู. ุงูุตุบูุฑุฉ ุฅุฐุง ุชุฌูุนุช ุชุตูุฑ ูุซูุฑ.",
        "ูุณูู ุฑุงุชุจู: 60% ุถุฑูุฑูุ 30% ุชุฑูููุ 10% ุชูููุฑโฆ ุจุชูุงุญุธ ูุฑู ูุจูุฑ.",
        "ุงูุชุจู ูููุดุชุฑูุงุช ุงูููููุฉ. ูู ุฃูุซุฑ ุตุฑู ูุถูุน ุจุฏูู ูุง ุชุญุณูู.",
        "ูู ุชุจูู ุชุญุงูุธูู ุนูู ูููุณูุ ุญุทู ูุจูุบ ุซุงุจุช ูู ุดูุฑ ูู ุงูุญุณุงุจ ุงููุบูู."
    ]
  },

 {
    keywords: ["ุชุฑุง ุงุนุฑู ููู ุงุตุฑู "," ุงุนุฑู ุงุฏูุฑ ูุตุงุฑููู","ุชุฑุง ุงูุง ูุงุงุตุฑู ", "ุงุญุณ ุงูู ูุงุงุตุฑู ูุซูุฑ"],
    replies: [
      "ุดุทูุฑู ูุงุฐุง ูู ุงููุทููุจ ุงุจูู ุชุณุชูุฑูู ู ูููุนูุง ุจูุณุงุนุฏู ุงูุซุฑ.",
      "ููู ! ูุงุดูู ุตุญ ู ูุน ูููุนูุง ุงูููุถูุน ุจูุตูุฑ ุณูู ุงูุซุฑ!.",
     " ุญูู ูุงุดูู ุตุญ ุงุณุชูุฑู ูุงูุง ุจุฏุนูู! ."
    ]
  },
  {
  keywords: [
    "ุงูุด ุฐุง ุงูุชุทุจูู",
    "ูุด ุฐุง ุงูุชุทุจูู",
    "ูุฐุง ุงูุชุทุจูู ุงูุด",
    "ุงูุชุทุจูู ุฐุง ูุด",
    "ุงูุด ุฐุง ุงููููุน",
    "ุงููููุน ุฐุง ูุด",
    "ููุฑุฉ ุงูุชุทุจูู",
    "ููุฑุฉ ุงููููุน",
    "ุงููููุน ุฐุง ุงูุด ูุณูู",
    "ุงูุชุทุจูู ุฐุง ุงูุด ูุณูู"
  ],
  replies: [
    "ูุฐุง ุชุทุจูู ููุฒุงููุชูุ ูุณุงุนุฏู ุชุฑุชุจูู ุฏุฎูู ููุตุงุฑููู ูุชุนุฑููู ููู ุชุฑูุญ ูููุณู.",
    "ููุฒุงููุชู ุนุจุงุฑุฉ ุนู ูุณุงุนุฏ ูุงูู ุจุณูุท ูุณุฌูู ูุตุงุฑููู ููุญุณุจ ูู ุฑุตูุฏู ููุนุฑุถ ูู ุชูุงุฑูุฑ ูุงุถุญุฉ.",
    "ููุฑุฉ ุงููููุน ุฅูู ูููู ุฏูุชุฑ ููุฒุงููุฉ ุฐูู: ุชุถูููู ูุตุงุฑููู ููู ูุญุณุจ ููู ุฑุงุญุช ูููุณู.",
    "ุงูุชุทุจูู ูุณูุญ ูู ุชุถูููู ูุชุนุฏููู ูุชุญุฐููู ุงููุตุงุฑููุ ูุชุดูููู ุงูุฑุตูุฏ ูุงูุญุณุงุจ ุงููุบูู ูุน ูุตุงูุญ ูู ูุณุงุนุฏ ุงูุฐูุงุก."
  ]
},

  {
    keywords: ["ุชูููุฑ", "ุงุจู ุงููุฑ", "ููู ุงููุฑ"],
    replies: [
        "ููุฑู ูู ุจุฏุงูุฉ ุงูุดูุฑุ ูู ูู ุขุฎุฑู. ุฃู ูุจูุบ ุชุญุทููู ุจุงูุจุฏุงูุฉ ุจูุจูู.",
        "ุงุจุฏุฆู ุจูุจูุบ ุตุบูุฑ ูุซุงุจุช. 5ูช ูู ุฏุฎูู ุจุณ ูุงููุฉ ูุจุฏุงูุฉ.",
        "ุงูุญุณุงุจ ุงููุบูู ููุฑุฉ ููุชุงุฒุฉ ูู ุชุญุณูู ูุฏู ุทุงูุฑู ุจุงูุตุฑู."
    ]
  },

  {
    keywords: ["ุฑุงุชุจู ูุฎุชูู ุนูุทูู", "ูุงูุจูู ุดู ูู ุฑุงุชุจู ููู", "ุงุฎุชูุงุก ุงูุฑุงุชุจ"],
    replies: [
        "ูุฃูู ูุง ุชุชุจุนูู ุตุฑูู. ุณุฌููู ูู ูุตุฑูู ูุฏุฎู ุญูุงุชู.",
        "ูููู ุฐููู ู ุงุนุฑูู ููู ุชุตุฑููู ูููุณู ุจุฐูุงุก.",
        "ุฃูุจุฑ ุณุจุจ ูุถูุน ุงูุฑุงุชุจ: ุทูุจุงุชุ ูููุฉุ ุชูุตูู. ุงูุทุนููุง ุงุณุจูุน ุจุณ ูุจุชุดูููู ุงููุฑู."
    ]
  },

  {
    keywords: ["ุงูุญุณุงุจ ุงููุบูู", "ุญุณุงุจ ูุบูู", "ูุด ูุงูุฏุฉ ุงูุญุณุงุจ ุงููุบูู", "ุฃูุฏุฑ ุฃุตุฑู ูู ุงูุญุณุงุจ ุงููุบูู"],
    replies: [
      "ุงูุญุณุงุจ ุงููุบูู ูุฎุตุต ููุงุฏุฎุงุฑ ููุชุฑุฉ ูุนููุฉุ ููุง ุชูุฏุฑูู ุชุณุญุจูู ููู ุฅูุง ุงุฐุง ููุต ูู ุฑุงุชุจู ุงูุงุณุงุณู 30% .",
      "ุงูุบุฑุถ ูู ุงูุญุณุงุจ ุงููุบูู ุฃูู ูุณุงุนุฏู ุชููุฑ ุงููุงู ุจุนูุฏ ุนู ุงููุตุงุฑูู ุงูููููุฉ.",
      "ุฃู ูููุณ ุชุญุทูููุง ูู ุงูุญุณุงุจ ุงููุบูู ุชุจูู ูุญููุธุฉ ู ุงุฐุง ุฑุงุชุจู ุงูุงุณุงุณู ููุต 30% ููู ููุง ูููุชุญ ุงูุญุณุงุจ ุงููุบูู."
    ]
  },
 
  {
    keywords: ["ุงุตุฑู ูุซูุฑ", "ุงุตุฑู ุจูุงูุนู", "ูุงูุฏุฑ ุงุชุญูู", "ูููุณู ุชุฑูุญ"],
    replies: [
        "ุฌุฑุจู ูุงุนุฏุฉ: ูุจู ูุง ุชุดุชุฑูู ุฃู ุดู ุงุณุฃูู ููุณู: โูู ุฃุญุชุงุฌูุ ููุง ุฃุจุบุงูุโ.",
        "ุณุฌููู ูู ูุตุฑูู ุฃูู ุจุฃููโฆ ุฃูุซุฑ ุดูุก ูุฎูู ุงููุงุณ ุชุชูุงุฌุฃ ุขุฎุฑ ุงูุดูุฑ ุฅููู ูุง ูุชุงุจุนูู.",
        "ุฎููู ุงููุดุชุฑูุงุช ุงูุนุงุทููุฉโฆ ุงููู ุชุฌู ุจุงูููุงุณุฉ ูุชุฑูุญ ูู ุงูุฑุงุชุจ."
    ]
  },

  {
    keywords: ["ุนูู ุฏููู", "ูุงูุต", "ูุงูููู", "ุงุฒูุฉ"],
    replies: [
        "ุฃูู ูุงุนุฏุฉ: ูุง ุชุตุฑููู ุดูุก ุฅูุง ูุฃูุชู ุญุงุณุจุฉ ูุฏุฑุชู. ุงูุฃููููุฉ ููุฃุดูุงุก ุงูุถุฑูุฑูุฉ ููุท.",
        "ูู ุนูุฏู ุฏููโฆ ุงุจุฏุฆู ุจุณุฏุงุฏู ุจุงููุจุงูุบ ุงูุตุบูุฑุฉ. ูุง ุชุฎูููู ูููู ุญูุงุชู.",
        "ุฑุชูุจู ุฃููููุงุชู: ุฃููุ ููุตูุงุชุ ูุงุชูุฑุฉโฆ ูุงูุจุงูู ุจุนุฏูู.",
        "ุชุฑุง ุนูุฏูุง ุงูุญู : ุงูุญุณุงุจ ุงููุบูู ููุง ุชูุฏุฑ  ุชุฌูุน ูููุณ ู ุชุญุทูุง ููู ูู ุดูุฑ  ู ุงูุญุณุงุจ ูุงููุชุญ ุงูุง ููุง ูููุต 30% ูู ุฑุงุชุจู ุงูุงุณุงุณู ูุนูู ูููุชุญ ุงุฐุง ููุณุช "
    ]
  },

  {
    keywords: ["ุณุงูุจ", "ุฑูู ุณุงูุจ"],
    replies: [
      "ุงููุธุงู ูููุน ุฅุฏุฎุงู ุงูุฃุฑูุงู ุงูุณุงูุจุฉ ูุญูุงูุฉ ุงูุญุณุงุจ.",
      "ุงูุฃุฑูุงู ุงูุณุงูุจุฉ ุบูุฑ ูุณููุญุฉ ูู ุงููุธุงู."
    ]
  },

  {
    keywords: ["ุฑุชุจ ูููุณู", "ูููุณู ููุฎุจุทู", "ูุงุนุฑู ุงุฑุชุจ"],
    replies: [
        "ุณุฌููู ุฏุฎููุ ุซู ูุตุงุฑููู ุงูุฃุณุงุณูุฉุ ูุจุนุฏูุง ุงูุชุฑููู. ุฎููู ุชุฑุชูุจ ูุงุถุญ.",
        "ุฌุฑุจู ุชูุณูููู: (ุฃุณุงุณู โ ูููู โ ุชุฑูููู โ ุชูููุฑ).",
        "ูู ุดูุฑ ุฑุงุฌุนู ุชูุฑูุฑูโฆ ุดููู ููู ุบูุทุชู ูุนุฏููู ููุดูุฑ ุงููู ุจุนุฏู."
    ]
  },

  {
    keywords: ["ุงูุฑุตูุฏ","ุงุฌูุงูู", "ุงูุฑุตูุฏ ุงูุงุฌูุงูู"],
    replies: [
      "ุงูุฑุตูุฏ ุงูุฅุฌูุงูู ูู ุงูุฑุตูุฏ ุงูุฑุฆูุณู ุงู ุฑุงุชุจู .",
      "ูู ุชุญุทูู ูู ูููุณู ููู .",
      "ูู ุงููุญูุธุฉ ุงูุฃุณุงุณูุฉ ููู ุชุนุงููุงุชู ุงููุงููุฉ."
    ]
  },

   {
    keywords: ["ุงููู","ุงูุง","ูููุช","ุงู", "ุชูุงู"],
    replies: [
      "ุชูุงู ุงุฐุง ุชุญุชุงุฌ ุงู ุดู ูุงุชุชุฑุฏุฏ ู ุงุณุงููู .",
      "ูููุณ ุงุฐุง ุชุจู ุดู ููููู.",
      "ุญูู ุงุฐุง ุชุจู ุดู ูุงุชุชุฑุฏุฏ ู ุงุชูุงุตู ูุนู."
    ]
  },

   {
    keywords: ["ุงุดููู ุจุนุฏูู","ููุง","ุจุงู", "ูุน ุงูุณูุงูู "],
    replies: [
      "ูุน ุงูุณูุงูู .",
      "ุจุงู ุงุฐุง ุชุญุชุงุฌูู ุดู ุงูุง ุจุฎุฏูุชู.",
      "ูุน ุงูุณูุงูู , ุงุฐุง ุชุจูู ุดู ุงูุง ุจุฎุฏูุชู."
    ]
  },

   

   {
    keywords: ["ุจุณ ุชุถูุน ูููุณู", "ุงุตุฑู ", "ุงุตุฑู ูุงุฌุฏ"],
    replies: [
        "ุงููุดุชุฑูุงุช ุงูููููุฉ ูู ุฃุณุฑุน ุดู ุชุฎููู. ุญุฏุฏู ูุจูุบ ุฃุณุจูุนู ูุงูุชุฒูู ููู.",
        "ุฑุงูุจู ูุณู (ุณุฌู ุงูุนูููุงุช) ูุดููู ููู ูุฑูุญ ุตุฑูู ูููููุง.",
        "ูููุฉ + ุทูุจุงุช + ุณูุงูโฆ ูุฐู ุฃูุซุฑ ุดู ุชุจูุน ุงูุฑุงุชุจ ุจุฏูู ูุง ุชุญุณู ู ุงูุชุจูู"
    ]
  },

  {
    keywords: ["ุงูุชูุงุฑูุฑ","ุงูุนูููุงุช" ,"ุงูุชูุฑูุฑ","   ุนุฑุถ ุงูุนูููุงุช", "ููู ุงุดูู ุงูุชูุงุฑูุฑ"],
    replies: [
      "ูู ุตูุญุฉ ุงูุชูุงุฑูุฑ ุชุดูููู ุงูุฑุตูุฏ ุงูุฅุฌูุงูู ููู ูุงููุตุฑููุงุช ุชุญุช ูุน ุชุตููู ูู ุนูููุฉ.",
      "ุงูุชูุงุฑูุฑ ุชุนุฑุถ ูู ูู ุงููุตุฑููุงุช ูุน ุงูุชุงุฑูุฎ ูุงููุจูุบ ูุงูุชุนูููุงุช.",
      "ูู ุงููุตุฑููุงุช ูุตููุฉ ุญุณุจ ููุน ุงูุนูููุฉุ ูุชูุฏุฑูู ุชุถูููู ูุตุฑูู ุฌุฏูุฏ ุจุณูููุฉ."
    ]
  },

  {
    keywords: ["ุณุฌู ุงูุนูููุงุช", "ุงูุชุงุฑูุฎ", "ููุน ุงูุนูููุฉ", "ุงูุชุตููู"],
    replies: [
      "ุณุฌู ุงูุนูููุงุช ููุถุญ ูู ุนูููุฉุ ููุนูุงุ ุงููุจูุบุ ุงูุชุงุฑูุฎุ ูุงูุชุนููู.",
      "ุชูุฏุฑูู ุชุนุฏููู ุฃู ุชุญุฐููู ุฃู ุนูููุฉ ูู ุณุฌู ุงูุนูููุงุช ุนู ุทุฑูู ุงูุฃุฒุฑุงุฑ ุจุฌุงูุจ ูู ุณุฌู.",
    ]
  },

  {
    keywords: ["ุฅุถุงูุฉ ูุตุฑูู", "ุฃุถูู ูุตุฑูู", "ุฒุฑ ุงูุฅุถุงูุฉ"],
    replies: [
      "ุงูู ุดู ุงุฏุฎูู ุงููุจูุบุ ุงูุชุตูููุ ูุงูุชุนููู, ูุณูุชู ุฅุถุงูุชู ุชููุงุฆููุง ูุณุฌู ุงูุนูููุงุช.",
      "ููุฒุฉ ุฅุถุงูุฉ ุงููุตุฑูู ุชุณุงุนุฏู ุชูุตูู ูู ูุตุฑูู ุนู ุงููุตุฑููุงุช ุงูุฃุฎุฑู ุจุณูููุฉ."
    ]
  },

  {
    keywords: ["ุชุนุฏูู ุนูููุฉ", "ุญุฐู ุนูููุฉ", "ุชุบููุฑ ุนูููุฉ"],
    replies: [
      "ุนุดุงู ุชุนุฏููู ุฃู ุชุญุฐููู ุนูููุฉุ ุงุณุชุฎุฏูู ุงูุฃุฒุฑุงุฑ ุจุฌุงูุจ ูู ุณุฌู ูู ุณุฌู ุงูุนูููุงุช.",
      "ุชุนุฏูู ุงูุนูููุงุช ูุชูุญ ูู ุชุตุญูุญ ุฃู ุฎุทุฃ ุจุงููุจูุบ ุฃู ุงูุชุตููู.",
      "ุงูุญุฐู ูุญุฐู ุงูุนูููุฉ ููุงุฆููุง."
    ]
  }
];

/* ุญูุธ ุงูุดุงุช ูุน ููุช ุงูุชูุงุก (ููู ูุงูู) */
function saveChat() {
  const chat = document.getElementById("chat").innerHTML;
  const expireTime = Date.now() + 24 * 60 * 60 * 1000; // ููู
  localStorage.setItem(CHAT_KEY, chat);
  localStorage.setItem(CHAT_EXPIRE_KEY, expireTime.toString());
}

/* ุงุณุชุฑุฌุงุน ุงูุดุงุช ุฅุฐุง ูุง ุงูุชูู ููุชู */
function loadChat() {
  const saved = localStorage.getItem(CHAT_KEY);
  const expire = localStorage.getItem(CHAT_EXPIRE_KEY);

  if (saved && expire) {
    if (Date.now() < parseInt(expire)) {
      document.getElementById("chat").innerHTML = saved;
    } else {
      localStorage.removeItem(CHAT_KEY);
      localStorage.removeItem(CHAT_EXPIRE_KEY);
    }
  }
}

/* ูุฎุชุงุฑ ุงูุฑุฏ ุงูุฐูู */
function getReply(text) {
  const user = text.toLowerCase();

  for (let rule of rules) {
    for (let key of rule.keywords) {
      const cleanKey = key.toLowerCase().trim(); // ูุดูู ุงููุณุงูุงุช ุงูุฒุงูุฏุฉ
      if (!cleanKey) continue;
      if (user.includes(cleanKey)) {
        return randomReply(rule.replies);
      }
    }
  }

  return randomReply([
    "ูููู ุชูุถุญูู ูู ุฃูุซุฑุ ๐",
    "ุฃูุง ูุนูุ ุจุณ ุงุญุชุงุฌ ุชูุงุตูู ุฒูุงุฏุฉ.",
    "ูุง ูููุช ุนููู ุชูุงูุ ุชูุฏุฑูู ุชุนูุฏูู ุตูุงุบุฉ ุณุคุงููุ"
  ]);
}

/* ุงุฎุชูุงุฑ ุฑุฏ ุนุดูุงุฆู */
function randomReply(list) {
  return list[Math.floor(Math.random() * list.length)];
}

/* ูุธุงู ุฅุฑุณุงู ุงูุฑุณุงูุฉ */
function send() {
  const input = document.getElementById("msg");
  const text = input.value.trim();
  if (!text) return;

  const chat = document.getElementById("chat");

  const userDiv = document.createElement("div");
  userDiv.className = "msg user";
  userDiv.textContent = "ุฃูุช: " + text;
  chat.appendChild(userDiv);

  const reply = getReply(text);

  const aiDiv = document.createElement("div");
  aiDiv.className = "msg ai";
  aiDiv.textContent = "ุงูุฐูุงุก: " + reply;
  chat.appendChild(aiDiv);

  chat.scrollTop = chat.scrollHeight;
  input.value = "";
  input.focus();

  // ูุญูุธ ุงูุดุงุช ุจุนุฏ ูู ุฅุฑุณุงู
  saveChat();
}

// ุฅุฑุณุงู ุนูุฏ ุงูุถุบุท ุนูู Enter ุฃู ุนูู ุฒุฑ ุงูุฅุฑุณุงู
document.getElementById("msg").addEventListener("keydown", function(e) {
    if (e.key === "Enter") {
        e.preventDefault(); 
        send();
    }
});

// ุงุณุชุฑุฌุงุน ุงูุดุงุช ุฃูู ูุง ุชูุชุญ ุงูุตูุญุฉ
loadChat();
</script>

</body>
</html>